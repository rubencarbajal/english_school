<div class="min-h-screen bg-slate-900 flex items-center justify-center px-4 py-12">
  <div class="w-full max-w-lg bg-slate-800/50 border border-slate-700 rounded-xl p-6 md:p-8 shadow-2xl animate-fade-in">
    
    <!-- Title -->
    <h1 class="text-4xl md:text-5xl font-extrabold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-sky-400 to-blue-500 text-center">
      Forgot your password?
    </h1>
    <p class="mt-2 text-center text-slate-400">
      Enter your email and we’ll send you a reset link.
    </p>

    <!-- Success State -->
    @if (resetSent()) {
      <div class="mt-6 rounded-lg border border-emerald-600 bg-emerald-500/10 p-4 text-emerald-400">
        We’ve sent a password reset link to
        <span class="font-semibold text-emerald-300">{{ maskedEmail(sentToEmail()) }}</span>.
        Please check your inbox and follow the instructions.
      </div>
    }

    <!-- Form -->
    <form class="mt-8 space-y-6" [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div>
        <label for="email" class="block text-sm text-slate-400 mb-1">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          autocomplete="email"
          class="w-full rounded-lg bg-slate-900 border border-slate-700 px-4 py-3 text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-sky-500 transition-all"
          placeholder="you@example.com"
        />
        @if (email.touched && email.invalid) {
          <p class="mt-2 text-sm text-amber-400">
            @if (email.errors?.['required']) { Email is required. }
            @if (email.errors?.['email']) { Enter a valid email. }
          </p>
        }
      </div>

      <div class="flex flex-col sm:flex-row gap-3">
        <button
          type="submit"
          [disabled]="loading()"
          class="flex-1 font-semibold py-3 px-8 rounded-lg transition-colors duration-300 bg-emerald-500 hover:bg-emerald-600 text-white disabled:opacity-60 disabled:cursor-not-allowed"
        >
          @if (!loading()) { Send reset link } @else { Sending… }
        </button>

        <button
          type="button"
          (click)="resend()"
          [disabled]="!resetSent() || !canResend()"
          class="sm:w-48 font-semibold py-3 px-6 rounded-lg transition-colors duration-300 bg-slate-700 hover:bg-slate-600 text-slate-200 disabled:opacity-60 disabled:cursor-not-allowed"
        >
          @if (resetSent() && !canResend()) { Resend in {{ countdown() }}s } @else { Resend link }
        </button>
      </div>
    </form>

    <!-- Actions -->
    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 gap-3">
      <button
        type="button"
        (click)="openEmailApp()"
        class="w-full font-semibold py-3 px-6 rounded-lg transition-colors duration-300 bg-slate-700 hover:bg-slate-600 text-slate-200"
      >
        Open email app
      </button>

      <a
        routerLink="/auth"
        class="w-full text-center font-semibold py-3 px-6 rounded-lg transition-colors duration-300 bg-sky-500 hover:bg-sky-600 text-white"
      >
        Back to login
      </a>
    </div>
  </div>
</div>
